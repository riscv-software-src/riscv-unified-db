# yaml-language-server: $schema=../../../schemas/csr_schema.json
$schema: csr_schema.json#
kind: csr
name: srmcfg
long_name: Supervisor Resource Management Configuration
address: 0x5C0 # Until the extension is finalized and assigned an official address by the RISC-V Foundation, srmcfg will use a placeholder/custom address
priv_mode: S
length: SXLEN
definedBy: Ssqosid
description: |
  The srmcfg register is used to configure a Resource Control ID (RCID) and a Monitoring Counter ID (MCID).
  Both RCID and MCID are WARL fields.

  The RCID and MCID accompany each request made by the hart to shared resource controllers.
  The RCID is used to determine the resource allocations (e.g., cache occupancy limits, memory bandwidth limits, etc.) to enforce.
  The MCID is used to identify a counter to monitor resource usage.

  The RCID and MCID configured in the srmcfg CSR apply to all privilege modes of software execution on that hart by default,
  but this behavior may be overridden by future extensions.

  If extension Smstateen is implemented together with Ssqosid, then Ssqosid also requires the SRMCFG bit in mstateen0 to be implemented.
  If mstateen0.SRMCFG is 0, attempts to access srmcfg in privilege modes less privileged than M-mode raise an illegal-instruction exception.
  If mstateen0.SRMCFG is 1 or if extension Smstateen is not implemented, attempts to access srmcfg when V=1 raise a virtual-instruction exception.

  [Note]
  A reset value of 0 is suggested for the RCID field, matching resource controllers' default behavior of associating all capacity with RCID=0.
  The MCID reset value does not affect functionality and may be implementation-defined.

fields:
  RCID:
    location: 11-0
    type: RW
    description: |
      The RCID is used to determine the resource allocations (e.g., cache occupancy limits,
      memory bandwidth limits, etc.) to enforce.
    reset_value: 0

  MCID:
    location: 27-16
    type: RW
    description: |
      The MCID is used to identify a counter to monitor resource usage.
    reset_value: 0
