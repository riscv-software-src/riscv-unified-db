<%= anchor_for_udb_doc_ext(ext.name) %>
= <%= ext.name %> Extension
<%= ext.long_name %>

== Versions

<% ext.versions.each do |v| -%>
[frame="none",grid="none",cols="1,3"]
|===
2+^| Version <%= v.canonical_version %>

h| State | <%= v.state %>
<% if v.state == "ratified" && !v.ratification_date.nil? -%>
h| Ratification date | <%= v.ratification_date %>
<% end # if %>
<% unless v.changes.empty? -%>
h| Changes a|

    <% v.changes.each do |c| -%>
    * <%= c %>
    <% end -%>

<% end -%>
<% unless v.url.nil? -%>
h| Ratification document | <%= v.url %>
<% end -%>
<% unless v.defining_extension_requirements.empty? -%>
h| Requirements a|

!===
! Extension ! Version ! When

<%- v.defining_extension_requirements.each do |cond_ext_req| -%>
! <%= cond_ext_req.ext_req.name %>
! <%= cond_ext_req.ext_req.requirement_specs_to_s_pretty %>
! <%= cond_ext_req.cond.empty? ? "always" : cond_ext_req.cond.to_asciidoc %>
<%- end -%>

!===
<% end -%>
|===
<% end -%>

== Synopsis

<%= ext.description %>

<%- insts = ext.instructions -%>
<%- unless insts.empty? -%>
== Instructions

The following instructions are affected by this extension:

[cols="1,3"]
|===
<%- insts.each do |inst| -%>
 | <%= "`#{inst.name}`" %> | *<%= inst.long_name %>*
<%- end -%>
|===
<%- end -%>

<%- unless ext.params.empty? -%>
== Parameters

This extension has the following implementation options (AKA parameters):

<%- ext.params.sort_by { |p| p.name }.each do |param| -%>
<%= anchor_for_udb_doc_ext_param(ext.name, param.name) %>
<%= param.name %>::
+
--
|===
h| Type
<%- if param.schema_known? -%>
| <%= param.schema.type_pretty %>
<%- else -%>
|
<%- param.schemas.each do |cond_schema| -%>
<%- next unless cond_schema.cond.could_be_satisfied_by_cfg_arch?(cfg_arch) -%>
<%= cond_schema.schema.type_pretty %> when <%= cond_schema.cond.to_asciidoc %>
<%- end-%>
<%- end -%>
h| Valid Values
<%- if param.schema_known? -%>
| <%= param.schema.to_pretty_s %>
<%- else -%>
|
<%- param.schemas.each do |cond_schema| -%>
<%- next unless cond_schema.cond.could_be_satisfied_by_cfg_arch?(cfg_arch) -%>
<%= cond_schema.schema.to_pretty_s %> when <%= cond_schema.cond.to_asciidoc %>
<%- end-%>
<%- end-%>
h| Description a| <%= param.description %>
|===
--
<%- end -%>

<%- end -%>
