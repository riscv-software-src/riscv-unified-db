<% unless db_obj.cert_test_procedures.empty? -%>
<% nice_name = db_obj.is_a?(Udb::CsrField) ? "#{db_obj.parent.name}.#{db_obj.name}" : db_obj.name -%>
<%   if defined?(use_description_list) && use_description_list -%>
Test Procedures for `<%= nice_name %>`: ::
<%   else -%>
<%     if defined?(fmt) && fmt == "combo" -%>
==== Test Procedures for `<%= nice_name %>`
<%     elsif defined?(fmt) && fmt == "appendix" -%>
==== Test Procedures
<%     else -%>
==== `<%= nice_name %>`
<%     end -%>
<%   end -%>

<%   db_obj.cert_test_procedures.each do |tp| -%>
[%autowidth]
.*Test Procedure Name <%= tp.name %>*
|===

| *Test File Name* | <%= tp.test_file_name.nil? ? "None" : tp.test_file_name %>
| *Description* | <%= tp.description %>
| *Normative Rules*
a|
<%     tp.normative_rules.each do |nr| -%>
* <%= defined?(fmt) ? link_to_udb_doc_norm_rule(fmt, nr.name) : nr.name %>
<%     end # each nr -%>
| *Steps*
a|
<%= tp.cert_steps %>
<%   end # each test procedure -%>
|===

<% end # unless no test plans -%>
