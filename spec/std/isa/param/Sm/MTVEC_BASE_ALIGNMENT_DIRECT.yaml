# Copyright (c) Qualcomm Technologies, Inc. and/or its subsidiaries.
# SPDX-License-Identifier: BSD-3-Clause-Clear

# yaml-language-server: $schema=../../../../schemas/param_schema.json

$schema: param_schema.json#
kind: parameter
name: MTVEC_BASE_ALIGNMENT_DIRECT
long_name: |
  Minumum alignment of `mtvec.BASE` when `mtvec.MODE` is 0 (direct)
definedBy:
  allOf:
    - extension:
        name: Sm
    - param:
        allOf:
          - name: MTVEC_MODES
            includes: 0
            reason: Only relevant when direct mode is supported
          - name: MTVEC_ACCESS
            equal: read-write
            reason: Base address is hard-coded when MTVEC_ACCESS is read-only
description: |
  Minimum alignement of the base pointer. Because `mtvec` excludes the two least-significant bits of
  the base, the minimum alignment cannot be less than 4.
schema:
  rv32:
    # power of 2 between 4 and 2^31
    allOf:
      - $ref: schema_defs.json#/$defs/32bit_unsigned_pow2
      - not:
          enum: [1, 2]
  rv64:
    # power of 2 between 4 and 2^63
    allOf:
      - $ref: schema_defs.json#/$defs/64bit_unsigned_pow2
      - not:
          enum: [1, 2]
