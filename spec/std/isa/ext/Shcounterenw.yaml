# Copyright (c) Qualcomm Technologies, Inc. and/or its subsidiaries.
# SPDX-License-Identifier: BSD-3-Clause-Clear

# yaml-language-server: $schema=../../../schemas/ext_schema.json

$schema: "ext_schema.json#"
kind: extension
name: Shcounterenw
long_name: Hypervisor counter enable
description: |
  For any hpmcounter that is not read-only zero, the corresponding bit in `hcounteren` must be writable.

  [NOTE]
  This extension was ratified with the RVA22 profiles.
type: privileged
versions:
  - version: "1.0.0"
    state: ratified
    ratification_date: 2023-08
    url: https://drive.google.com/file/d/1KcjgbLM5L1ZKY8934aJl8aQwGlMz6Cbo/view?usp=drive_link
requirements:
  idl(): |
    -> implemented?(ExtensionName::H);

    for (U32 i = 3; i < 32; i++){
      HPM_COUNTER_EN[i] -> HCOUNTENABLE_EN[i];
    }
  reason:
    Shcounterenw requires that all non-read-only-0 counters can enabled with hcounteren.
