# Copyright (c) Qualcomm Technologies, Inc. and/or its subsidiaries.
# SPDX-License-Identifier: BSD-3-Clause-Clear

# yaml-language-server: $schema=../../../schemas/ext_schema.json

$schema: "ext_schema.json#"
kind: extension
name: Smpmp
type: privileged
long_name: Physical Memory Protection
versions:
  - version: "1.11.0"
    state: ratified
    ratification_date: 2019-12
    changes:
      - Made the unused `pmpaddr` and `pmpcfg` fields *WARL*, rather than *WIRI*.
      - Specified semantics for PMP regions coarser than four bytes.
  - version: "1.12.0"
    state: ratified
    ratification_date: 2021-12
    changes:
      - PMP changes require an SFENCE.VMA on any hart that implements
        page-based virtual memory, even if VM is not currently enabled.
      - PMP reset values are now platform-defined.
      - An additional 48 optional PMP registers have been defined.
  - version: "1.13.0"
    state: frozen
    ratification_date: 2023-12
description: |
  To support secure processing and contain faults, it is desirable to limit the physical addresses
  accessible by software running on a hart. The optional PMP (Physical Memory Protection) unit
  provides per-hart machine-mode control registers to allow physical memory access privileges (read,
  write, execute) to be specified for each physical memory region. The PMP values are checked in
  parallel with the PMA checks.

  [NOTE]
  --
  This is a placeholder extension name defined by the `riscv-unified-db` and isn't considered an extension in
  the Privileged ISA manual. This was chosen as an extension rather than a M-mode parameter since the
  PMP has no visible ISA features (such as read-only-0 CSRs) if not present in an implementation.
  Making it an extension in the database prevents having the PMP CSRs show up in implementations that don't have a PMP.
  --
