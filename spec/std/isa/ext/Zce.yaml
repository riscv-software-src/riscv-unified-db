# Copyright (c) Qualcomm Technologies, Inc. and/or its subsidiaries.
# SPDX-License-Identifier: BSD-3-Clause-Clear

# yaml-language-server: $schema=../../../schemas/ext_schema.json

$schema: "ext_schema.json#"
kind: extension
name: Zce
long_name: Compressed instructions for microcontrollers
description: |
  The Zce extension is intended to be used for microcontrollers, and includes all relevant Zc
  extensions.

  * Specifying `Zce` on RV32 without `F` includes `Zca`, `Zcb`, `Zcmp`, `Zcmt`
  * Specifying `Zce` on RV32 with `F` includes `Zca`, `Zcb`, `Zcmp`, `Zcmt` and `Zcf`
  * Specifying `Zce` on RV64 always includes `Zca`, `Zcb`, `Zcmp`, `Zcmt`
  * `Zcf` doesn't exist for RV64

  Therefore common ISA strings can be updated as follows to include the relevant Zc extensions, for
  example:

  * RV32IMC becomes RV32IM_Zce
  * RV32IMCF becomes RV32IMF_Zce
type: unprivileged
company:
  name: RISC-V International
  url: https://riscv.org
versions:
  - version: "1.0.0"
    state: ratified
    ratification_date: 2023-04
    repositories:
      - url: https://github.com/riscv/riscv-code-size-reduction
        branch: main
    contributors:
      - name: Tariq Kurd
      - name: Ibrahim Abu Kharmeh
      - name: Torbj√∏rn Viem Ness
      - name: Matteo Perotti
      - name: Nidal Faour
      - name: Bill Traynor
      - name: Rafael Sene
      - name: Xinlong Wu
      - name: sinan
      - name: Jeremy Bennett
      - name: Heda Chen
      - name: Alasdair Armstrong
      - name: Graeme Smecher
      - name: Nicolas Brunie
      - name: Jiawei
    requirements:
      oneOf:
        - allOf:
            - param:
                name: MXLEN
                equal: 32
            - extension:
                allOf:
                  - name: Zca
                    version: "= 1.0.0"
                  - name: Zcb
                    version: "= 1.0.0"
                  - name: Zcmp
                    version: "= 1.0.0"
                  - name: Zcmt
                    version: "= 1.0.0"
            - not:
                extension:
                  name: F
        - allOf:
            - param:
                name: MXLEN
                equal: 32
            - extension:
                allOf:
                  - name: Zca
                    version: "= 1.0.0"
                  - name: Zcb
                    version: "= 1.0.0"
                  - name: Zcmp
                    version: "= 1.0.0"
                  - name: Zcmt
                    version: "= 1.0.0"
                  - name: Zcf
                    version: "= 1.0.0"
                  - name: F
        - allOf:
            - param:
                name: MXLEN
                equal: 64
            - extension:
                allOf:
                  - name: Zca
                    version: "= 1.0.0"
                  - name: Zcb
                    version: "= 1.0.0"
                  - name: Zcmp
                    version: "= 1.0.0"
                  - name: Zcmt
                    version: "= 1.0.0"

requirements:
  not:
    extension:
     anyOf:
        - allOf:
          - name: C
          - name: D
        - name: Zcd
